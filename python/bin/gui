#!/usr/bin/env python
import _localpaths
from mocap_bridge.gui.manager_view import ManagerView
from mocap_bridge.readers.json_reader import JsonReader

class Runner:
    def __init__(self):
        self.setup() # auto-setup

    def setup(self):
        self.view = ManagerView()
        self.view.setup()
        self.status = 'running'

        self.json_file = "data/sampleRecording3.json"
        self.reader = JsonReader(self.json_file, manager=self.view.manager)
        # self.osc_host = '127.0.0.1' if len(sys.argv) < 3 else sys.argv[2]
        # self.osc_port = 8080 if len(sys.argv) < 4 else sys.argv[3]


    def update(self):
        self.reader.update()
        if self.view.update() != True:
            self.status = 'stopped'

runner = Runner()
while runner.status == 'running':
    runner.update()
