#!/usr/bin/env python
import _localpaths

from mocap_bridge.natnet_pipeline import NatNetPipeline
# from mocap_bridge.default_readers import JSONNatNetReader
from mocap_bridge.osc_reader import OSCReader
from mocap_bridge.console_writer import ConsoleWriter

import sys

osc_host = '127.0.0.1' if len(sys.argv) < 2 else sys.argv[1]
osc_port = 8080 if len(sys.argv) < 3 else sys.argv[2]

pipeline = NatNetPipeline(OSCReader(osc_host, osc_port), ConsoleWriter())
pipeline.start()

while True:
    try:
        pass
    except:
        pipeline.stop()
        break
