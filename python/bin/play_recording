#!/usr/bin/env python
import _localpaths

from mocap_bridge.natnet_pipeline import NatNetPipeline
# from mocap_bridge.default_readers import JSONNatNetReader
from mocap_bridge.json_natnet_reader import JSONNatNetReader
from mocap_bridge.osc_natnet_writer import OSCNatNetWriter

import sys

if len(sys.argv) < 2:
    datafile = "data/sampleRecording3.json"
else:
    datafile = sys.argv[1]

pipeline = NatNetPipeline(JSONNatNetReader(datafile), OSCNatNetWriter())
pipeline.start()

while True:
    try:
        pass
    except:
        pipeline.stop()
        break
